_______Fixes and Updates in Backend:

1. When updating/deleting a budget (validate within date of budget creation; Time/Date Validation)

2. reports are for income and expenses only. from a start date to an end date. Check ChatGPT for download option/path.

3. Create Email and test budget threshold.

4. Fix the 'generate_transaction_file' function in the service directory to query on the income /expenses/budgets or
both (income/expenses). Also delete the transactionModel and schema.

5. Create a relation between income and expense and budget

6. Create a budget recoommendation model using machine learning

7. Fix budget creation date to be date and time not just by date.

8. Fix download path and swagger UI required fields.

9. Also, total income creation logic

______Fixes and Updates in frontend:

1. Dashboard for report to test buttons and more importantly plotting transactions/generate report


2. Handle all cases where the user inputs correct parameters (best case scenario).


3. Login/Register Card

4. Logout directs the user to homepage



############# Testing Notification Endpoint- Will Delete Later ##########################

@budget_router.post("/send-email/")
async def send_email_endpoint(to_email: str, subject: str, body: str):
    try:
        send_email(to_email, subject, body)
        return {"message": "Email sent successfully"}
    except Exception as e:
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail=str(e))


@budget_router.post("/notify-user/{budget_id}/")
async def notify_user_endpoint(budget_id: int, db: Session = Depends(get_db)):
    db_budget = db.query(Budget).filter(Budget.id == budget_id).first()
    if not db_budget:
        raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Budget not found")
    try:
        notify_user(db_budget, db)
        return {"message": "User notified successfully"}
    except Exception as e:
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail=str(e))
